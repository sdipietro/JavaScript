!function(e){var t={};function i(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=t,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(r,n,function(t){return e[t]}.bind(null,n));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/dist/",i(i.s=1)}([function(e,t,i){},function(e,t,i){"use strict";i.r(t);i(0);var r=document.getElementById("game"),n=r.getContext("2d");function o(e,t,i){n.fillStyle=i,n.fillRect(25*e,25*t,25,25),n.strokeStyle="lightblue",n.strokeRect(25*e,25*t,25,25)}for(var c=[],s=0;s<21;s++){c[s]=[];for(var u=0;u<15;u++)c[s][u]="white"}function a(){for(var e=0;e<21;e++)for(var t=0;t<15;t++)o(t,e,c[e][t])}function l(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var h=function(){function e(t,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.piece=t,this.color=i,this.flipNum=0,this.currentPiece=this.piece[this.flipNum],this.x=3,this.y=0,this.board=c,this.gameOver=!1,this.gamePaused=!1,this.scoreElement=document.getElementById("score"),this.score=0}var t,i,r;return t=e,(i=[{key:"placePiece",value:function(){for(var e=0;e<this.currentPiece.length;e++)for(var t=0;t<this.currentPiece.length;t++)this.currentPiece[e][t]&&o(this.x+t,this.y+e,this.color)}},{key:"removePiece",value:function(){for(var e=0;e<this.currentPiece.length;e++)for(var t=0;t<this.currentPiece.length;t++)this.currentPiece[e][t]&&o(this.x+t,this.y+e,"white")}},{key:"moveDown",value:function(){this.collision(0,1,this.currentPiece)?(this.freeze(),this.piece=v()):(this.removePiece(),this.y++,this.placePiece())}},{key:"moveLeft",value:function(){this.collision(-1,0,this.currentPiece)||(this.removePiece(),this.x--,this.placePiece())}},{key:"moveRight",value:function(){this.collision(1,0,this.currentPiece)||(this.removePiece(),this.x++,this.placePiece())}},{key:"rotate",value:function(){var e=this.piece[(this.flipNum+1)%this.piece.length];this.collision(0,0,e)||(this.removePiece(),this.flipNum=(this.flipNum+1)%this.piece.length,this.currentPiece=this.piece[this.flipNum],this.placePiece())}},{key:"collision",value:function(e,t,i){for(var r=0;r<i.length;r++)for(var n=0;n<i.length;n++)if(i[r][n]&&!(this.y+r+t<0)){if(this.x+n+e<0||this.x+n+e>=15||this.y+r+t>=21)return!0;if("white"!=this.board[this.y+r+t][this.x+n+e])return!0}return!1}},{key:"freeze",value:function(){for(var e=0;e<this.currentPiece.length;e++)for(var t=0;t<this.currentPiece.length;t++)if(this.currentPiece[e][t]){if(this.y+e<1){alert("GAME OVER"),this.gameOver=!0;break}c[this.y+e][this.x+t]=this.color}for(var i=0;i<21;i++){for(var r=!0,n=0;n<15;n++)r=r&&"white"!=c[i][n];if(r){for(var o=i;o>1;o--)for(var s=0;s<15;s++)c[o][s]=c[o-1][s];for(var u=0;u<15;u++)c[0][u]="white";this.scoreElement.innerHTML=parseInt(this.scoreElement.innerHTML)+100}}a()}}])&&l(t.prototype,i),r&&l(t,r),e}(),f=[[[[[0,0,0,0],[1,1,1,1],[0,0,0,0],[0,0,0,0]],[[0,0,1,0],[0,0,1,0],[0,0,1,0],[0,0,1,0]],[[0,0,0,0],[0,0,0,0],[1,1,1,1],[0,0,0,0]],[[0,1,0,0],[0,1,0,0],[0,1,0,0],[0,1,0,0]]],"red"],[[[[1,0,0],[1,1,1],[0,0,0]],[[0,1,1],[0,1,0],[0,1,0]],[[0,0,0],[1,1,1],[0,0,1]],[[0,1,0],[0,1,0],[1,1,0]]],"orange"],[[[[0,0,1],[1,1,1],[0,0,0]],[[0,1,0],[0,1,0],[0,1,1]],[[0,0,0],[1,1,1],[1,0,0]],[[1,1,0],[0,1,0],[0,1,0]]],"cyan"],[[[[0,0,0,0],[0,1,1,0],[0,1,1,0],[0,0,0,0]]],"blue"],[[[[0,1,1],[1,1,0],[0,0,0]],[[0,1,0],[0,1,1],[0,0,1]],[[0,0,0],[0,1,1],[1,1,0]],[[1,0,0],[1,1,0],[0,1,0]]],"purple"],[[[[1,1,0],[0,1,1],[0,0,0]],[[0,0,1],[0,1,1],[0,1,0]],[[0,0,0],[1,1,0],[0,1,1]],[[0,1,0],[1,1,0],[1,0,0]]],"green"]];function v(){var e=Math.floor(5*Math.random());return p=new h(f[e][0],f[e][1])}var p=v();document.addEventListener("keydown",(function(e){37==e.keyCode?(e.preventDefault(),p.moveLeft()):38===e.keyCode?(e.preventDefault(),p.rotate()):39===e.keyCode?(e.preventDefault(),p.moveRight()):40===e.keyCode&&(e.preventDefault(),p.moveDown())}));var m=Date.now();function y(){Date.now()-m>600&&(p.moveDown(),m=Date.now()),!1===p.gameOver&&requestAnimationFrame(y)}document.addEventListener("DOMContentLoaded",(function(){a(),y()}))}]);
//# sourceMappingURL=main.js.map